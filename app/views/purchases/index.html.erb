<%if admin? %>
<table>
  <thead>
    <tr>
	  <th>Customer</th>
      <th>Bicycle</th>
      <th>Date of purchase</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
	<h1>Listing all purchases made by all customers</h1>
    <% @purchases.each do |purchase| %>
      <tr>
			<td><%= purchase.customer.userName %></td>
			<td><%= purchase.bicycle.modelName %></td>
			<td><%= purchase.dateOfPurchase %></td>
			<td><%= link_to 'Show', purchase %></td>
			<td><%= link_to 'Edit', edit_purchase_path(purchase) %></td>
			<td><%= link_to 'Destroy', purchase, method: :delete, data: { confirm: 'Are you sure?' } %></td>
		<% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<% else if signed_in? and !admin?%>
<table>
  <thead>
    <tr>
      <th>Bicycle</th>
      <th>Date of purchase</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
	<h1>Listing purchases made by: <%= @current_customer.userName %></h1>
    <% @purchases.each do |purchase| %>
      <tr>
		<% if purchase.customer_id == @current_customer.id %>
			<td><%= purchase.bicycle.modelName %></td>
			<td><%= purchase.dateOfPurchase %></td>
			<td><%= link_to 'Show', purchase %></td>
		<% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Purchase', new_purchase_path %>

<% else if !signed_in? and !admin? %>
		<h1>You must be logged on to visit this page</h1>
		<p>New user? <%=link_to "Sign up now!", new_customer_path %></p>
		<p>Already a member? <%= link_to "Sign in", login_path %></p>
<%end%>
<%end%>